.table-responsive
  %table.table.table-hover.pretty
    %thead
      %tr
        %th #
        %th= t('shared.code')
        %th= t("shared.name")
        %th= t('job.video_list')
        %th= t('shared.recommendation')
        %th

    %tbody
      - @batch.importing_items.each_with_index do |importing_item, index|
        - item = importing_item.itemable
        - if item.valid?
          = f.fields_for :importing_items, importing_item do |ff|
            = ff.hidden_field :itemable_id
            = ff.hidden_field :itemable_type
            = ff.fields_for :itemable, item do |fff|
              = fff.hidden_field :id
              = fff.hidden_field :code
              = fff.hidden_field :name
              = fff.hidden_field :recommendation
              = fff.select :video_ids, f.object.video_ids, {}, multiple: true, style: "display: none;"

        %tr
          %td= index + 1
          %td= item.code
          %td= item.name
          %td
            - item.videos.each do |video|
              = link_to video.url, target: '_blank' do
                = image_tag video.thumbnail, style: 'width: 50px;'
          %td= item.recommendation

          / Validation status
          %td= render "shared/validation_status", item: item
